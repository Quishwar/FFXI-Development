@import "tailwindcss";

@theme {
  --color-brand: var(--brand-color);
  --color-operator: var(--operator-color);
  --color-ui-window: var(--window-bg);
  --color-lua-orange: #f97316;
  --color-lua-green: #22c55e;
  --variant-dark: [data-theme="dark"] &;
}

/* --- 1. DARK THEME (Default) --- */
:root, [data-theme='dark'] {
  --brand-color: #3b82f6;      
  --operator-color: #a1a1aa;   
  --window-bg: #18181b;
  --background: #09090b;
  --foreground: #fafafa;
  --active-text: #ffffff;
}

:root {
  --brand: #eab308;
  --brand-rgb: 234, 179, 8;
}

[data-theme='dark'] {
  background-color: var(--background) !important;
}

/* Dark Mode UI Fixes */
[data-theme='dark'] [cmdk-item],
[data-theme='dark'] [cmdk-input] {
  color: #ffffff !important;
}

/* --- 2. FFXI THEME --- */
[data-theme='ffxi'] {
  --brand-color: #ffcc00;
  --operator-color: #ffffff;
  --window-bg: #000080;
  --background: #000033;
  --foreground: #ffffff;
  --active-text: #000000;
  background: linear-gradient(180deg, #000080 0%, #000033 100%) fixed !important;
}

/* --- 3. GLOBAL UI COMPONENTS --- */

.app-title {
  color: var(--brand-color) !important;
  font-weight: 900;
  letter-spacing: -0.05em;
  text-transform: uppercase;
  transition: all 0.30s ease;
}

[data-theme='ffxi'] .app-title {
  text-shadow: 2px 2px 0px #000, -1px -1px 0px #000;
  letter-spacing: 0.05em;
}

.ff-window {
  background: var(--window-bg);
  border: 1px solid rgba(255, 255, 255, 0.1);
  @apply rounded-xl transition-all relative;
  backface-visibility: hidden;
  transform: translateZ(0);
}

[data-theme='ffxi'] .ff-window {
  border: 1px solid #000 !important;
  box-shadow: inset 1px 1px 0px #fff, inset -1px -1px 0px #000 !important;
  border-radius: 0px !important;
  image-rendering: -webkit-optimize-contrast;
}

[data-theme='dark'] .ff-window:hover {
  border-color: rgba(59, 130, 246, 0.5) !important;
  box-shadow: 0 0 12px rgba(59, 130, 246, 0.1);
  background-color: #27272a !important; 
}

/* Target only slot-specific text for Blue Hover in Dark Mode */
[data-theme='dark'] .ff-window:hover span.text-operator\/60,
[data-theme='dark'] .ff-window:hover .text-operator\/30,
[data-theme='dark'] .ff-window:hover .text-white {
  color: var(--brand-color) !important;
  transition: color 0.2s ease;
}

/* Ensure Clear Slot text stays white/muted */
[cmdk-item] span.opacity-70 {
  color: #ffffff !important;
  opacity: 0.7 !important;
}

/* --- EQUIPPED INNER GLOW FIX --- */
[data-theme='ffxi'] .ff-window.border-brand {
  box-shadow: 
    inset 1px 1px 0px #fff, 
    inset -1px -1px 0px #000,
    inset 0 0 20px rgba(234, 179, 8, 0.45) !important;
  background-color: #0000aa !important; 
  filter: brightness(1.1);
  transform: translateY(-1px) translateZ(0);
}

[data-theme='dark'] .ff-window.border-brand {
  box-shadow: inset 0 0 15px rgba(59, 130, 246, 0.2) !important;
  background-color: rgba(59, 130, 246, 0.15) !important;
}

/* --- 4. INTERACTION & FINGERS --- */

.ff-interactive {
  transform-style: preserve-3d;
  perspective: 1000px;
  transform: translateZ(0);
  transition: transform 0.1s ease-in-out;
}

[data-theme='ffxi'] .ff-interactive:hover::before {
  content: "ðŸ‘‰" !important;
  position: absolute;
  left: -28px;
  top: 50%;
  transform: translateY(-50%) translateZ(10px);
  font-size: 16px;
  display: block !important;
  animation: ff-finger-wiggle 0.4s infinite alternate;
  z-index: 100 !important;
}

@keyframes ff-finger-wiggle {
  from { transform: translateY(-50%) translate3d(0, 0, 10px); }
  to { transform: translateY(-50%) translate3d(-4px, 0, 10px); }
}

[data-theme='ffxi'] .ff-interactive:hover {
  transform: translate3d(6px, 0, 0);
}

[data-theme='dark'] .ff-interactive:hover {
  filter: brightness(1.2);
}

/* --- 5. TABS & ACTIVE STATES --- */

[data-state='active'], [aria-selected="true"] {
  background-color: var(--brand-color) !important;
  color: var(--active-text) !important;
  text-shadow: none !important;
  font-weight: 700;
}

[data-theme='ffxi'] [data-state='active'] {
  box-shadow: inset 1px 1px 0px #fff, inset -1px -1px 0px #000 !important;
  border-radius: 2px !important;
}

main, .group\/section, #root, .ff-grid-container, [role="grid"], .max-w-4xl {
  overflow: visible !important;
}

/* Dialog Specifics */
[data-theme='ffxi'] [role='dialog'] {
  border: 1px solid #000 !important;
  box-shadow: inset 1px 1px 0px #fff, inset -1px -1px 0px #000, 8px 8px 0px rgba(0,0,0,0.5) !important;
  border-radius: 0px !important;
  overflow: visible !important;
}

[data-theme='ffxi'] [role='dialog'] input {
  background-color: #000044 !important;
  border: 1px solid #fff !important;
  border-radius: 0px !important;
  color: white !important;
}

[data-theme='ffxi'] [role='dialog'] button[type='submit'] {
  border: 1px solid #fff;
}

.dialog-submit-btn {
  @apply transition-all duration-200;
}

[data-theme='ffxi'] .dialog-submit-btn {
  border-radius: 0px !important;
  box-shadow: inset 1px 1px 0px #fff, inset -1px -1px 0px #000 !important;
  border: 1px solid #000 !important;
}

[data-theme='dark'] .dialog-submit-btn {
  border-radius: 8px !important; 
}

[data-theme='ffxi'] [role='dialog'] .ff-interactive:hover::before {
  left: -32px;
  content: "ðŸ‘‰" !important;
}

/* --- 6. COMMAND/SEARCH OVERRIDES --- */

/* Force search icon to white in both themes */
[cmdk-input-wrapper] svg, 
.lucide-search {
  color: #ffffff !important;
  stroke: #ffffff !important;
  opacity: 0.6 !important;
}

[data-theme='ffxi'] [cmdk-input],
[data-theme='ffxi'] [cmdk-item],
[data-theme='ffxi'] [cmdk-group-heading],
[data-theme='ffxi'] [cmdk-empty] {
  color: #ffffff !important;
  -webkit-font-smoothing: none;
  text-rendering: optimizeLegibility;
}

[data-theme='ffxi'] [cmdk-item][aria-selected="true"] {
  background-color: var(--brand-color) !important;
  color: #000000 !important;
  text-shadow: none !important;
}

[data-theme='ffxi'] [cmdk-input]::placeholder {
  color: rgba(255, 255, 255, 0.4) !important;
}

[data-theme='ffxi'] [cmdk-root],
[data-theme='ffxi'] [role='listbox'] {
  background-color: var(--window-bg) !important;
}