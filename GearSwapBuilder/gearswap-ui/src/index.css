@import "tailwindcss";

@theme {
  --color-brand: var(--brand-color);
  --color-operator: var(--operator-color);
  --color-ui-window: var(--window-bg);
  --color-lua-orange: #f97316;
  --color-lua-green: #22c55e;
  --font-russo: "Russo One", sans-serif;
  --font-chakra: "Chakra Petch", sans-serif;
}

@variant dark (&:where([data-theme="dark"] *));
@variant light (&:where([data-theme="light"] *));
@variant ffxi (&:where([data-theme="ffxi"] *));

body {
  font-family: var(--font-chakra);
}

/* Component-level focus states are preferred over global *:focus-visible */

/* --- 1. DARK THEME (Default) --- */
:root,
[data-theme='dark'] {
  --brand-color: #22c55e;
  /* CTA/Accent */
  --operator-color: #94a3b8;
  /* Slate 400 */
  --window-bg: #1E293B;
  /* Primary */
  --background: #0F172A;
  /* Background */
  --foreground: #F8FAFC;
  /* Text */
  --active-text: #ffffff;
}

:root {
  --brand: #22c55e;
  --brand-rgb: 34, 197, 94;
}

[data-theme='dark'] {
  background-color: var(--background) !important;
}

[data-theme='dark'] [cmdk-item],
[data-theme='dark'] [cmdk-input] {
  color: #ffffff !important;
}

/* --- 2. LIGHT THEME --- */
[data-theme='light'] {
  --brand-color: #16a34a;
  --operator-color: #475569;
  --window-bg: #F8FAFC;
  --background: #E2E8F0;
  --foreground: #0F172A;
  --active-text: #ffffff;

  --color-white: #0F172A;
  --color-black: #ffffff;
}

[data-theme='light'] {
  background-color: var(--background) !important;
  color: var(--foreground) !important;
}

[data-theme='light'] [cmdk-item],
[data-theme='light'] [cmdk-input] {
  color: #0F172A !important;
}

/* --- 3. FFXI THEME --- */
[data-theme='ffxi'] {
  --brand-color: #ffcc00;
  --operator-color: #ffffff;
  --window-bg: #000080;
  --background: #000033;
  --foreground: #ffffff;
  --active-text: #000000;
  background: linear-gradient(180deg, #000080 0%, #000033 100%) fixed !important;
}

/* --- 3. GLOBAL UI COMPONENTS --- */

.app-title {
  color: var(--brand-color) !important;
  font-weight: 900;
  letter-spacing: -0.05em;
  text-transform: uppercase;
  transition: all 0.30s ease;
}

[data-theme='ffxi'] .app-title {
  text-shadow: 2px 2px 0px #000, -1px -1px 0px #000;
  letter-spacing: 0.05em;
}

@utility ff-window {
  background: var(--window-bg);
  border: 1px solid rgba(255, 255, 255, 0.1);
  border-radius: 0.75rem;
  transition: all 0.3s ease;
  position: relative;
  backface-visibility: hidden;
  transform: translateZ(0);
}

[data-theme='ffxi'] .ff-window {
  border: 1px solid #000 !important;
  box-shadow: inset 1px 1px 0px #fff, inset -1px -1px 0px #000 !important;
  border-radius: 0px !important;
  image-rendering: -webkit-optimize-contrast;
}

/* --- 4. HOVER LOGIC (FIXED) --- */

/* Normal Windows: Blue highlight */
[data-theme='dark'] .ff-window:not([data-critical="true"]):hover {
  border-color: rgba(59, 130, 246, 0.5) !important;
  box-shadow: 0 0 12px rgba(59, 130, 246, 0.1);
  background-color: #27272a !important;
}

/* Target specific text for Blue Hover in Dark Mode (Non-Critical only) */
[data-theme='dark'] .ff-window:not([data-critical="true"]):hover span.text-operator\/60,
[data-theme='dark'] .ff-window:not([data-critical="true"]):hover .text-operator\/30,
[data-theme='dark'] .ff-window:not([data-critical="true"]):hover .text-white {
  color: var(--brand-color) !important;
  transition: color 0.2s ease;
}

/* Critical Windows: Stays red on hover */
[data-theme='dark'] .ff-window[data-critical="true"]:hover {
  border-color: #ef4444 !important;
  box-shadow: 0 0 12px rgba(239, 68, 68, 0.2);
}

[cmdk-item] span.opacity-70 {
  color: #ffffff !important;
  opacity: 0.7 !important;
}

/* --- 5. EQUIPPED INNER GLOW --- */
[data-theme='ffxi'] .ff-window.border-brand {
  box-shadow: inset 1px 1px 0px #fff, inset -1px -1px 0px #000, inset 0 0 20px rgba(234, 179, 8, 0.45) !important;
  background-color: #0000aa !important;
  filter: brightness(1.1);
  transform: translateY(-1px) translateZ(0);
}

[data-theme='dark'] .ff-window.border-brand {
  box-shadow: inset 0 0 15px rgba(59, 130, 246, 0.2) !important;
  background-color: rgba(59, 130, 246, 0.15) !important;
}

/* --- 6. INTERACTION & FINGERS --- */
.ff-interactive {
  transform-style: preserve-3d;
  perspective: 1000px;
  transform: translateZ(0);
  transition: transform 0.1s ease-in-out;
}

[data-theme='ffxi'] .ff-interactive:hover::before {
  content: "ðŸ‘‰" !important;
  position: absolute;
  left: -28px;
  top: 50%;
  transform: translateY(-50%) translateZ(10px);
  font-size: 16px;
  display: block !important;
  animation: ff-finger-wiggle 0.4s infinite alternate;
  z-index: 100 !important;
}

@keyframes ff-finger-wiggle {
  from {
    transform: translateY(-50%) translate3d(0, 0, 10px);
  }

  to {
    transform: translateY(-50%) translate3d(-4px, 0, 10px);
  }
}

[data-theme='ffxi'] .ff-interactive:hover {
  transform: translate3d(6px, 0, 0);
}

[data-theme='dark'] .ff-interactive:hover {
  filter: brightness(1.2);
}

/* --- 7. TABS & DIALOGS --- */
[data-state='active'],
[aria-selected="true"] {
  background-color: var(--brand-color) !important;
  color: var(--active-text) !important;
  text-shadow: none !important;
  font-weight: 700;
}

[data-theme='ffxi'] [data-state='active'] {
  box-shadow: inset 1px 1px 0px #fff, inset -1px -1px 0px #000 !important;
  border-radius: 2px !important;
}

/* Base Scrollbar Utility */
.custom-scrollbar {
  scrollbar-width: thin;
}

.custom-scrollbar::-webkit-scrollbar {
  width: 6px;
  height: 6px;
}

.custom-scrollbar::-webkit-scrollbar-thumb {
  border-radius: 0px;
}

/* --- DARK THEME: BLUE THUMB / NEUTRAL TRACK --- */
[data-theme='dark'] .custom-scrollbar {
  scrollbar-color: #3b82f6 rgba(255, 255, 255, 0.05);
}

[data-theme='dark'] .custom-scrollbar::-webkit-scrollbar-track {
  background: rgba(0, 0, 0, 0.3);
  /* Subtle dark neutral track */
}

[data-theme='dark'] .custom-scrollbar::-webkit-scrollbar-thumb {
  background-color: #1e40af;
  /* Deep Blue Thumb */
  border: 1px solid rgba(59, 130, 246, 0.3);
}

[data-theme='dark'] .custom-scrollbar::-webkit-scrollbar-thumb:hover {
  background-color: #3b82f6;
}

/* --- FFXI THEME: GOLD THUMB / DEEP BLUE TRACK --- */
[data-theme='ffxi'] .custom-scrollbar {
  scrollbar-color: #e2b007 #000033;
}

[data-theme='ffxi'] .custom-scrollbar::-webkit-scrollbar-track {
  background: #000033;
  /* Classic Blue Track */
  border-left: 1px solid rgba(255, 255, 255, 0.1);
}

[data-theme='ffxi'] .custom-scrollbar::-webkit-scrollbar-thumb {
  background-color: #e2b007;
  /* FFXI Gold Thumb */
  border: 1px solid #ffcc00;
  box-shadow: inset 1px 1px 0px rgba(255, 255, 255, 0.3);
}

[data-theme='ffxi'] .custom-scrollbar::-webkit-scrollbar-thumb:hover {
  background-color: #ffd700;
}

[role='dialog'] {
  @apply ff-window;
  position: fixed;
  left: 50%;
  top: 50%;
  transform: translate(-50%, -50%);
  z-index: 201;
  outline: none;
}

[data-radix-portal]>div:first-child {
  position: fixed;
  inset: 0;
  background: rgba(0, 0, 0, 0.5);
  z-index: 200;
}

[data-theme='ffxi'] [role='dialog'] {
  border: 1px solid #000 !important;
  box-shadow: inset 1px 1px 0px #fff, inset -1px -1px 0px #000, 8px 8px 0px rgba(0, 0, 0, 0.5) !important;
  border-radius: 0px !important;
}

[role='dialog'][data-critical="true"] {
  border-color: #ef4444 !important;
}

[data-theme='ffxi'] [role='dialog'][data-critical="true"] {
  --window-bg: #440000;
  background: var(--window-bg) !important;
}

/* --- 8. BUTTONS & INPUTS --- */
.dialog-submit-btn {
  @apply transition-all duration-200;
}

[data-critical="true"] .dialog-submit-btn {
  background-color: #ef4444 !important;
  color: white !important;
}

[data-theme='ffxi'] .dialog-submit-btn {
  border-radius: 0px !important;
  box-shadow: inset 1px 1px 0px #fff, inset -1px -1px 0px #000 !important;
  border: 1px solid #000 !important;
}

/* --- 9. COMMAND & SEARCH --- */
[cmdk-input-wrapper] svg {
  color: #ffffff !important;
  stroke: #ffffff !important;
  opacity: 0.6 !important;
}

[data-theme='ffxi'] [cmdk-input],
[data-theme='ffxi'] [cmdk-item] {
  color: #ffffff !important;
}

[data-theme='ffxi'] [cmdk-item][aria-selected="true"] {
  background-color: var(--brand-color) !important;
  color: #000000 !important;
}

[data-theme='ffxi'] [cmdk-root] {
  background-color: var(--window-bg) !important;
}

button,
.cursor-pointer,
.ff-interactive {
  cursor: pointer !important;
}

/* --- 10. TOOLTIPS --- */
/* --- 10. TOOLTIP ENHANCEMENTS --- */
.ff-tooltip {
  @apply antialiased select-none;
  background: var(--window-bg) !important;
  /* Increase padding and ensure a high-contrast border */
  padding: 0.75rem 1rem !important;
  border: 1px solid rgba(255, 255, 255, 0.2) !important;
  box-shadow: 0 10px 25px -5px rgba(0, 0, 0, 0.5) !important;
  min-width: 220px;
}

[data-theme='ffxi'] .ff-tooltip {
  border: 1px solid #fff !important;
  outline: 1px solid #000 !important;
  box-shadow: 4px 4px 0px rgba(0, 0, 0, 0.8) !important;
  /* FFXI tooltips usually have a very distinct blue gradient */
  background: linear-gradient(180deg, #0000aa 0%, #000044 100%) !important;
}

.tooltip-title {
  font-size: 15px !important;
  font-weight: 800 !important;
  letter-spacing: 0.025em;
  color: var(--brand-color) !important;
  margin-bottom: 0.5rem;
  border-bottom: 1px solid rgba(255, 255, 255, 0.1);
  padding-bottom: 0.25rem;
}

.tooltip-aug {
  font-size: 13px !important;
  line-height: 1.4;
  color: #22c55e;
  /* Lua Green */
  font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, monospace;
}

[data-theme='ffxi'] .tooltip-aug {
  color: #FFD700 !important;
  /* Gold for FFXI theme */
  text-shadow: 1px 1px 0px #000;
}